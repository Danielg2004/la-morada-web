<div class="container" *ngIf="ebook as e; else loadingTpl">
  <div class="card">
    <h2>{{ e.titulo }}</h2>
    <img *ngIf="e.imagen_url" [src]="e.imagen_url" alt="Portada" style="max-width: 280px; border-radius: 8px;">

    <p class="muted">{{ e.descripcion || 'Sin descripción' }}</p>

    <div class="row" style="display:flex; gap:8px; flex-wrap: wrap;">
      <button class="btn" (click)="openLink(e.archivo_url)" [disabled]="!e.archivo_url">Abrir archivo</button>
      <button class="btn outline" (click)="openLink(e.imagen_url)" [disabled]="!e.imagen_url">Ver imagen</button>

      <button class="btn" (click)="toggleFav()">
        {{ e.es_favorito ? 'Quitar favorito' : 'Favorito' }}
      </button>

      <a class="btn" routerLink="/ebooks">Volver</a>
    </div>
  </div>
</div>

<ng-template #loadingTpl>
  <div class="container"><div class="card">Cargando…</div></div>
</ng-template>
